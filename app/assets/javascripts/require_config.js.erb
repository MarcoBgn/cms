//= require jquery
//= require jquery_ujs

<% def requirejs_path(asset) ; javascript_path(asset).sub(/.js\z/, ''); end %>

requirejs.config({
  baseUrl: '../',
  paths: {
    // Editor core
    'constants': '<%= requirejs_path("mas-cms-editor/src/app/constants/constants") %>',
    'config': '<%= requirejs_path("mas-cms-editor/src/app/config/config") %>',
    'mas-editor': '<%= requirejs_path("comfortable_mexican_sofa/admin/modules/mas-editor") %>',
    'editor': '<%= requirejs_path("mas-cms-editor/src/app/app") %>',

    // Editor modules
    'editor-lib-wrapper': '<%= requirejs_path("mas-cms-editor/src/app/modules/editor-lib-wrapper/editor-lib-wrapper") %>',
    'source-converter': '<%= requirejs_path("mas-cms-editor/src/app/modules/source-converter/source-converter") %>',

     // Editor Shims
    'mutationobserver-shim': '<%= requirejs_path("mas-cms-editor/src/app/shims/mutationobserver.min") %>',

    // Editor plugins
    'editor-plugin-sticky-toolbar': '<%= requirejs_path("mas-cms-editor/src/app/plugins/editor-sticky-toolbar/editor-sticky-toolbar") %>',
    'editor-plugin-auto-resize-textarea': '<%= requirejs_path("mas-cms-editor/src/app/plugins/editor-auto-resize-textarea/editor-auto-resize-textarea") %>',

    // Application modules
    'URLToggler': '<%= requirejs_path("comfortable_mexican_sofa/admin/modules/URLToggler") %>',
    'MASEditor': '<%= requirejs_path("comfortable_mexican_sofa/admin/modules/MASEditor") %>',
    'ElementHider': '<%= requirejs_path("comfortable_mexican_sofa/admin/modules/ElementHider") %>',
    'FileInputSubmit': '<%= requirejs_path("comfortable_mexican_sofa/admin/modules/FileInputSubmit") %>',
    'AutoComplete': '<%= requirejs_path("comfortable_mexican_sofa/admin/modules/AutoComplete") %>',
    'Slugifier': '<%= requirejs_path("comfortable_mexican_sofa/admin/modules/Slugifier") %>',
    'MirrorInputValue': '<%= requirejs_path("comfortable_mexican_sofa/admin/modules/MirrorInputValue") %>',
    'Tags': '<%= requirejs_path("comfortable_mexican_sofa/admin/modules/Tags") %>',
    'PopoverCollapsable': '<%= requirejs_path("comfortable_mexican_sofa/admin/modules/PopoverCollapsable") %>',

    // Dough base modules
    'componentLoader': "<%= requirejs_path('dough/assets/js/lib/componentLoader') %>",
    'DoughBaseComponent': "<%= requirejs_path('dough/assets/js/components/DoughBaseComponent') %>",
    'featureDetect': "<%= requirejs_path('dough/assets/js/lib/featureDetect') %>",

    // Dough components
    'Collapsable': "<%= requirejs_path('dough/assets/js/components/Collapsable') %>",

    // Third-party dependencies
    'jquery': '<%= requirejs_path("jquery/dist/jquery.min") %>',
    'he': '<%= requirejs_path("he/he") %>',
    'rsvp': "<%= requirejs_path('rsvp/rsvp.amd') %>",
    'eventsWithPromises': "<%= requirejs_path('eventsWithPromises/src/eventsWithPromises') %>",
    'scribe': '<%= requirejs_path("scribe/scribe") %>',
    'scribe-plugin-blockquote-command': '<%= requirejs_path("scribe-plugin-blockquote-command/scribe-plugin-blockquote-command") %>',
    'scribe-plugin-formatter-plain-text-convert-new-lines-to-html': '<%= requirejs_path("scribe-plugin-formatter-plain-text-convert-new-lines-to-html/scribe-plugin-formatter-plain-text-convert-new-lines-to-html") %>',
    'scribe-plugin-heading-command': '<%= requirejs_path("scribe-plugin-heading-command/scribe-plugin-heading-command") %>',
    'scribe-plugin-keyboard-shortcuts': '<%= requirejs_path("scribe-plugin-keyboard-shortcuts/scribe-plugin-keyboard-shortcuts") %>',
    'scribe-plugin-link-prompt-command': '<%= requirejs_path("scribe-plugin-link-prompt-command/scribe-plugin-link-prompt-command") %>',
    'scribe-plugin-sanitizer': '<%= requirejs_path("scribe-plugin-sanitizer/scribe-plugin-sanitizer") %>',
    'scribe-plugin-toolbar': '<%= requirejs_path("scribe-plugin-toolbar/scribe-plugin-toolbar") %>',
    'marked': '<%= requirejs_path("marked/lib/marked") %>',
    'to-markdown' : '<%= requirejs_path("to-markdown/src/to-markdown") %>',
    'chosen': '<%= requirejs_path("chosen-build/chosen.jquery") %>',
	'taggle': '<%= requirejs_path("taggle.js/dist/taggle.min") %>'
  },
  shim: {
    'to-markdown' : {
      deps: ['he']
    },
    'chosen': {
      exports: 'Chosen',
      deps: ['jquery']
    },
    'taggle': {
      exports: 'Taggle'
    }
  }
});
